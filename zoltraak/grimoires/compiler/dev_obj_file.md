# Python ファイル詳細設計書生成プロンプト

あなたは経験豊富なソフトウェアエンジニアとして、提供された Python ファイルを分析し、改善された実装のための詳細設計書を作成してください。
この設計書は後続のコード生成の基礎となります。

## 入力

1. 分析対象の Python ファイル（必須）
2. 実装コンテキスト（オプション）

## 出力形式

# [ファイル名]の詳細設計書

## ゴール

このファイルが解決すべき具体的な課題や目的を記述してください。
元のコードから抽出した本質的な要件を明確に示してください。

## 1. 実装の目的

- このファイルが提供する具体的な機能
- 想定される使用方法
- 期待される結果や効果

## 2. 技術要件

- Python バージョン要件
- 必要なライブラリと依存関係
- 外部システムとの連携要件
- パフォーマンス要件
- エラーハンドリング要件

## 3. インターフェース設計

このファイルが外部に公開する主要なインターフェース：

- 関数/メソッドのシグネチャ
- 期待される入力と出力
- 型ヒントと検証ルール
- エラー条件と例外仕様

## 4. クラス設計

### クラス図

+------------------+
| クラス名 |
+------------------+
| - 属性 1: 型 |
| # 属性 2: 型 |
+------------------+
| + メソッド 1() |
| # メソッド 2() |
+------------------+

### クラス仕様

クラス名: `ClassName`
説明: クラスの責務と役割

属性:

- `属性名`: 型
  - アクセス制限: private/protected/public
  - 説明: 用途と目的
  - 制約: 値の制限や検証ルール
  - デフォルト値: 設定がある場合

メソッド:

- `メソッド名(引数: 型) -> 戻り値型`:
  - 目的: 処理内容の説明
  - 引数:
    - `引数名`: 説明と制約
  - 戻り値: 説明と保証される条件
  - 例外: 発生条件と理由
  - 事前条件: 実行に必要な条件
  - 事後条件: 実行後に保証される状態
  - 副作用: ある場合は詳細を記述

## 5. データ構造と型定義

- カスタム型や列挙型の定義
- データクラスの構造
- バリデーションルール
- 型ヒントの詳細

## 6. アルゴリズムと処理フロー

主要な処理について、以下を記述：

1. 前提条件と入力データの準備
2. 処理ステップの詳細
3. エッジケースの処理
4. エラー処理の方針
5. 処理結果の検証方法

## 7. 改善ポイント

元のコードから以下の観点で改善を提案：

1. コード品質

   - 命名規則の一貫性
   - 責務の明確な分離
   - 不要な複雑性の排除
   - デバッグ容易性の向上

2. 堅牢性

   - エラー処理の強化
   - 入力バリデーションの追加
   - 異常系への対応
   - 境界値の考慮

3. 保守性

   - コードの構造化
   - ドキュメンテーションの充実
   - テスタビリティの向上
   - 拡張性の確保

4. パフォーマンス
   - 処理の効率化
   - メモリ使用の最適化
   - 並行処理の考慮
   - キャッシュの活用

## 8. テスト要件

- ユニットテストのシナリオ
- 境界値テストケース
- 異常系テストケース
- 性能テストの基準

## コーディング規約

1. Python 標準のコーディング規約（PEP 8）の遵守
2. 型ヒントの積極的な活用
3. ドキュメンテーション文字列の必須化
4. 命名規則の統一
   - クラス名: UpperCamelCase
   - 関数/メソッド名: lowercase_with_underscores
   - 定数: UPPERCASE_WITH_UNDERSCORES
   - プライベート属性: \_leading_underscore

## 注意事項

1. すべての説明は日本語で記述してください
2. 技術用語は適切な日本語訳と英語を併記してください
3. 図表は ASCII 文字で明確に表現してください
4. 元のコードの意図を損なわずに改善を提案してください
5. テストが容易な設計を心がけてください

この設計書は、元のコードの本質的な要件を抽出し、より良い実装のための青写真となることを目指します。後続のコード生成で、より品質の高いコードが生成できるよう、詳細な指針を提供してください。

## コンテキスト: 以降が提供された Python コードになります

{prompt}
